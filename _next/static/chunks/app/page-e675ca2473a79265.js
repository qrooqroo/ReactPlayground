(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4380:(e,t,l)=>{Promise.resolve().then(l.bind(l,9128))},9128:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>c});var r=l(5155),o=l(2115);let n=e=>{let{board:t}=e;return(0,r.jsx)("div",{className:"board",children:t.map((e,t)=>(0,r.jsx)("div",{className:"row",children:e.map((e,t)=>(0,r.jsx)("div",{className:"cell ".concat(e.isFilled?"filled":""),style:{backgroundColor:e.color?e.color:"transparent"}},t))},t))})},i=(e,t)=>Array.from({length:e},()=>Array(t).fill({isFilled:0,color:null})),s=function(e,t,l){var r,o;let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;for(let s=0;s<(null==t||null==(r=t.shape)?void 0:r.length);s++)for(let r=0;r<t.shape[s].length;r++)if(0!==t.shape[s][r]){let t=l.y+s,a=l.x+r;if(a<0||a>=i||t>=n||t>=0&&(null==(o=e[t][a])?void 0:o.isFilled))return!0}return!1},a={I:{shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:"#00f0f0"},J:{shape:[[1,0,0],[1,1,1],[0,0,0]],color:"#0000f0"},L:{shape:[[0,0,1],[1,1,1],[0,0,0]],color:"#f0a000"},O:{shape:[[1,1],[1,1]],color:"#f0f000"},S:{shape:[[0,1,1],[1,1,0],[0,0,0]],color:"#00f000"},T:{shape:[[0,1,0],[1,1,1],[0,0,0]],color:"#a000f0"},Z:{shape:[[1,1,0],[0,1,1],[0,0,0]],color:"#f00000"}},d=e=>{let{queue:t}=e,l={width:"".concat(20,"px"),height:"".concat(20,"px"),backgroundColor:"#0ff",border:"1px solid #444"},o={width:"".concat(100,"px"),height:"".concat(40,"px"),display:"flex",alignItems:"top",justifyContent:"center"},n=e=>e&&e.shape?(0,r.jsx)("div",{children:e.shape.map((t,o)=>(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:t.map((t,o)=>(0,r.jsx)("div",{style:{...l,backgroundColor:t?e.color:"transparent",border:t?"1px solid #444":"none"}},o))},o))}):null;return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"".concat(20,"px")},children:[(0,r.jsx)("div",{style:{color:"white",fontWeight:"bold",fontSize:"16px"},children:"Next Tetromino"}),(0,r.jsx)("div",{style:{width:"".concat(100,"px"),paddingTop:"".concat(20,"px"),paddingBottom:"".concat(20,"px"),backgroundColor:"#222",border:"2px solid #0ff",borderRadius:"4px",display:"flex",flexDirection:"column",alignItems:"center",gap:"".concat(20,"px")},children:t.slice(0,4).map((e,t)=>(0,r.jsx)("div",{style:o,children:n(e)},t))})]})},c=function(){let e=()=>[...Object.keys(a)].sort(()=>Math.random()-.5).map(e=>a[e]),[t,l]=(0,o.useState)([]),[c,h]=(0,o.useState)(i(20,10)),[f,p]=(0,o.useState)(null),[u,x]=(0,o.useState)({x:3,y:-2}),[y,g]=(0,o.useState)(!1),[v,m]=(0,o.useState)(0),[w,b]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&b(!w)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),(0,o.useEffect)(()=>{let e=setInterval(()=>{y||w||C()},500);return()=>clearInterval(e)},[u,y,w]),(0,o.useEffect)(()=>{l(e())},[]),(0,o.useEffect)(()=>{let t=e(),r=t.shift();l(t),p(r)},[]);let j=e=>{let t=e.filter(e=>!e.every(e=>e.isFilled)),l=20-t.length,r=[...Array.from({length:l},()=>Array.from({length:10},()=>({isFilled:0,color:null}))),...t];for(;r.length<20;)r.unshift(Array.from({length:10},()=>({isFilled:0,color:null})));return l>0&&m(e=>e+100*l),r},k=(e,t)=>{for(let l=0;l<e.shape.length;l++)for(let r=0;r<e.shape[l].length;r++)if(0!==e.shape[l][r]&&t.y+l<0)return!0;return!1},E=()=>{if(w||y)return;let e=u.y,t={...u};for(;!s(c,f,{...t,y:e+1});)e++;let l={x:u.x,y:e},r=j(I(c,f,l));if(h(r),k(f,l))return void g(!0);A(r)},C=()=>{if(w||y)return;let e={x:u.x,y:u.y+1};if(s(c,f,e)){if(k(f,u))return void g(!0);let e=j(I(c,f,u));h(e),A(e)}else x(e)},S=e=>{let t={x:u.x+e,y:u.y};s(c,f,t,20,10)||x(t)},I=(e,t,l)=>{let r=[...e.map(e=>[...e])];return t.shape.forEach((e,o)=>{e.forEach((e,n)=>{if(0!==e){let i=l.y+o,s=l.x+n;i>=0&&i<20&&s>=0&&s<10&&(r[i][s]={isFilled:e,color:t.color})}})}),r},A=r=>{let o=[...t],n=o.shift(),i={x:3,y:-n.shape.length};if(s(r,n,i))return void g(!0);p(n),x(i),o.length<4&&o.push(...e()),l(o)},F=e=>e[0].map((t,l)=>e.map(e=>e[l])).reverse(),z=()=>{let e=F(f.shape),t={...f,shape:e};s(c,t,u,20,10)||p(t)},N=e=>{if("Escape"===e.key)return void b(e=>!e);y||w||("ArrowLeft"===e.key?S(-1):"ArrowRight"===e.key?S(1):"ArrowDown"===e.key?C():"ArrowUp"===e.key?z():"Space"===e.code&&E())};return(0,o.useEffect)(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N))),(0,r.jsxs)("div",{className:"App",style:{position:"relative",width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#111"},children:[y&&(0,r.jsxs)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:999},children:[(0,r.jsx)("h1",{style:{color:"white",fontSize:"48px",marginBottom:"24px"},children:"Game Over"}),(0,r.jsx)("button",{onClick:()=>{let t=i(20,10),r=e(),o=r.shift();h(t),l(r),p(o),x({x:3,y:-2}),g(!1)},style:{padding:"12px 24px",fontSize:"20px",fontWeight:"bold",backgroundColor:"#fff",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Restart"})]}),w&&!y&&(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:998},children:(0,r.jsx)("h1",{style:{color:"white",fontSize:"48px"},children:"Paused"})}),(0,r.jsxs)("div",{style:{display:"flex",gap:"40px"},children:[(0,r.jsx)(n,{board:(()=>{let e=[...c.map(e=>[...e])];return(null==f?void 0:f.shape)&&f.shape.forEach((t,l)=>{t.forEach((t,r)=>{if(0!==t){var o;let n=u.y+l,i=u.x+r;n>=0&&n<20&&i>=0&&i<10&&!(null==(o=e[n][i])?void 0:o.isFilled)&&(e[n][i]={isFilled:t,color:f.color})}})}),e})()}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{color:"white",fontSize:"16px",fontWeight:"bold",marginBottom:"4px"},children:"Total Score"}),(0,r.jsx)("div",{style:{color:"white",fontSize:"14px",marginBottom:"20px"},children:v}),(0,r.jsx)(d,{queue:t})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(4380)),_N_E=e.O()}]);